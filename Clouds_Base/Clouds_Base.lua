Clouds_Base={
	Version = "v0.2.1",
	nSteper = -1;
	tFriendList={
		--优优姐
		[950164]="尼兹米",
		[1236852]="颜悦花如梦",
		[2216267]="大大大米饭",
		[1236841]="莲神",
		[934846]="优优布纳",
		--流云
		[840395]="小流云",
		[916385]="流染",
		[1866265]="流纱",
		[1494964]="洛云子",
		[1000804]="一任浮云沧犬",
		[1148251]="从来不用光头",
		--寒枝
		[883296]="即墨寒枝",
		[1129615]="叶清狂",
		[932843]="云伞",
		[1260827]="南竹",
		[823881]="云扇",
		[1651492]="展虹霓",
		[1258339]="君为故",
		--白小沭
		[830949]="白沭",
		[1540581]="曲昔年",
		[1331721]="一曲长歌",
		[899754]="白木木",
		[964608]="白沭咩",
		--厂花花
		[962248]="长白山厂花花",
		[1309751]="星海依依",
		[1564846]="陌莫墨末",
		--愈七
		[583370]="未昔",
		[1849962]="愈七七七七七",
		[808859]="愈七",
		[1002574]="覆音",
		--蒜泥
		[810767]="末昔",
		[533829]="蒜泥泥泥泥泥",
		[980295]="覆觞",
		[980295]="亦问歌",
		[910120]="白柚",
		[1030849]="酱油瓶子",
		--夜雪
		[820375]="项夜雪",
		[1482839]="湮味雅",
		[1037777]="花爷天下",
		--元凶
		[657493]="元昭翊",
		[656408]="叶西",
		[810627]="段一刀",
		[1151978]="宁怀雪",
		[803427]="南宫靳",
		[657489]="唐鹤轩",
		[810650]="邢立轩",
		[2017049]="元圆圆",
		--春眠不醒
		[940830]="春眠不醒",
		[560132]="梳桐",
		[691383]="锦幽",
		[1657956]="舒桐",
		--小苏苏
		[935120]="苏莲生",
		[1150504]="苏心念",
		[1358472]="苏唯卿",
		[1850235]="洛雨君",
		[1535290]="君不惑",
		[1613708]="卧槽又",
		[1224276]="苏墨念",
		--天天
		[887624]="星陨天骥",
		--花谷谷
		[1052302]="花扶",
		[712937]="公子百晓",
		[1178171]="百夜起歌澜",
		[1173105]="依剑闯江湖",
		[1548114]="叶籽籽",
		[828660]="花芽衣",
		[745161]="暄墨",
		[712937]="公子百晓",
		--魔都理工
		[926435]="墨恩",
		[814675]="鸭米",
		[274822]="闵苡",
		[943995]="商朝",
		[973319]="某恩金闪闪",
		[1047130]="桐屿禅",
		[1216145]="轻松熊不轻松",
		[1230390]="汐靥",
		[1248605]="白手熊猫",
		[1255456]="夜长疯",
		[1357211]="逆晨",
		[1531908]="俐俐俐俐阳",
		[1543229]="蛋卷酥",
		[1546189]="徐迦楼",
		[1605763]="黑黑黑米饭",
		[1617384]="叶祈哲",
		[1686396]="鸭小米",
		[1822202]="十一要当学霸",
		[1828529]="莲岳",
		[1839711]="琪露诺大人",
		[1841146]="巧克力味草莓",
		[1870354]="紫夜微澜",
		[1971703]="汪了个汪",
		[2634521]="慕容紫液",
		[2768746]="白少爷赏口翔",
		--师父
		[754258]="怜爱素素",
		[853378]="雨乐豆豆",
		[664582]="月凝香",
	},
	--[[
		[2143126]="叶梦莹",
		[726590]="晨北",
		[1277937]="仗剑苍生道",
		[791609]="灵犀小木",
		[333615]="帅如小鸟",
		[846688]="尕若云",
		[952861]="星随月影",
		[1225963]="桃花不识妖",
		[1299163]="天霁水碧",
		[904861]="策马忆流年",
		[937758]="范小裕",
		[937849]="黑金古刀",
		[941189]="火锅小鱼",
		[949352]="狂霸酷炫拽",
		[885489]="叶希",
		[858038]="焚暮",
		[967186]="岁暮丹青",
		[974284]="水天锦年",
		[980328]="小企鹅",
		[993395]="快播",
		[841304]="搓蛋君",
		[837991]="默默滴打酱油",
		[1032550]="风起春城暮",
		[1050636]="微光一何思",
		[1064113]="繁霜暮影",
		[1078508]="望云溪",
		[837138]="洛虞",
		[1136143]="放开我的基友",
		[656408]="叶西",
		[114104]="星随",
		[1159803]="唐凌轩",
		[1173105]="依剑闯江湖",
		[831535]="苏星缺",
		[236026]="疯子营弓兵",
		[1226528]="暴走的花间间",
		[830187]="小邪邪的布娃",
		[818880]="砚冷恨花迟",
		[242683]="放歌纵酒",
		[258719]="优雅萌萌",
		[426374]="饕餮云龙",
		[1307837]="慕容御雪",
		[804940]="参商",
		[493743]="公孙秋寒",
		[932587]="花忆怜",
		[1524602]="墨意落花",
		[3615]="叶晓枫",
		[505039]="纪念剑心",
		[720898]="明教圣火令",
		[517875]="晗灵果",
		[1895646]="狼啸狼",
		[522234]="妤璎",
		[710298]="北城傲",
		[2376580]="墨武凝眉",
		[2419816]="雾锁忘川",
	]]

	tForceColor={
		[0]={255, 255, 255},--侠
		{225,215,75},--少林
		{175,75,255},--万花
		{255,100,125},--天策
		{100,125,255},--纯阳
		{255,125,255},--七秀
		{255,0,255},--五毒
		{0,128,192},--唐门
		{255,255,0},--藏剑
		["OW"]={168,168,168}--其他
	},
	tForceName={[0]="大侠","少林","万花","天策","纯阳","七秀","五毒","唐门","藏剑",["OW"]="其他",},
	tGenderColor={
		{50,175,200},
		{255,125,100},
		{200,150,200},
	},

	tBreathes={},
	szUsage="Usage(szString)--[[用法\n"..
		"@RETURN:<string>一个字符串"..
		"@szString:查询函数szString的用法]]\n",
}

function Clouds_Base.Usage(szString)
	local szName = string.match(szString,"^Clouds_Base%.(%w+)$") or szString
	return szName and Clouds_Base[szName] and Clouds_Base["sz"..szName]
end

Clouds_Base.HandlePool = class()

-- construct
function Clouds_Base.HandlePool:ctor(handle, xml)
	self.handle, self.xml = handle, xml
	handle.nFreeCount = 0
	handle:Clear()
end

-- clear
function Clouds_Base.HandlePool:Clear()
	self.handle:Clear()
	self.handle.nFreeCount = 0
end

-- new item
function Clouds_Base.HandlePool:new()
	local handle = self.handle
	local nCount = handle:GetItemCount()
	if handle.nFreeCount > 0 then
		for i = nCount - 1, 0, -1 do
			local item = handle:Lookup(i)
			if item.bFree then
				item.bFree = false
				handle.nFreeCount = handle.nFreeCount - 1
				return item
			end
		end
		handle.nFreeCount = 0
	else
		handle:AppendItemFromString(self.xml)
		local item = handle:Lookup(nCount)
		item.bFree = false
		return item
	end
end

-- remove item
function Clouds_Base.HandlePool:remove(item)
	if item:IsValid() then
		self.handle:RemoveItem(item)
	end
end

-- free item
function Clouds_Base.HandlePool:free(item)
	if item:IsValid() then
		self.handle.nFreeCount = self.handle.nFreeCount + 1
		item.bFree = true
		item:Hide()
	end
end

Clouds_Base.UI={}
function Clouds_Base.UI.RegAddonModInfo()
	local data={
		szName = "Clouds_Base",
		szTitle = "底层函数",
		dwIcon = 525,
		szClass = "TOOL",
		tWidget = {
			{
				tag = "CE1", type = "WndComboBox",
				w = 100, h = 25, text = "事件",
				anchor = "TOPLEFT", x = 0, y = 0,
				callback = function()
					return Clouds_Event.UI.GetMenu()
				end,
			},
		},
	}

	CUIRegAddonModInfo(data)
end

RegisterEvent("CUSTOM_DATA_LOADED", function()
	if not CUIBase then return end
	if arg0 == "Role" then
		Clouds_Base.UI.RegAddonModInfo()
	end
end)
